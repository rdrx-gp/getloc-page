<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Send Location</title>
</head>
<body>
  <h3>Getting location‚Ä¶</h3>
  <script>
    function sendLoc(lat, lon, acc) {
      fetch('https://subunequal-foxiest-jolie.ngrok-free.dev/receive-location', {   <!-- ‚úÖ your real Node.js server URL -->
        method: 'POST',
        headers: {'Content-Type':'application/json'},
        body: JSON.stringify({lat, lon, acc, t: Date.now()})
      })
      .then(() => {
        document.body.innerHTML = `
          <h3>Location sent ‚úÖ</h3>
          <p>Latitude: ${lat}</p>
          <p>Longitude: ${lon}</p>
          <p>Accuracy: ¬±${acc} meters</p>
        `;
      })
      .catch(err => {
        document.body.innerHTML = '<p>Send failed ‚ùå</p>';
        console.error(err);
      });
    }

    if (!navigator.geolocation) {
      document.body.innerHTML = '<p>Geolocation not supported ‚ùå</p>';
    } else {
      navigator.geolocation.getCurrentPosition(
        pos => sendLoc(pos.coords.latitude, pos.coords.longitude, pos.coords.accuracy),
        err => {
          document.body.innerHTML = '<p>Permission denied üö´</p>';
          console.error(err);
        },
        {enableHighAccuracy: true, timeout: 10000, maximumAge: 0}
      );
    }
  </script>
</body>
</html>
